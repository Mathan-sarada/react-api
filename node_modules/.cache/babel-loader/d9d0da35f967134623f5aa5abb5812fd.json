{"ast":null,"code":"import _regeneratorRuntime from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import CommonTable from\"../components/common/CommonTable\";import{Service_Api}from\"../api/service_api\";import{Category_Api}from\"../api/category_api\";import{Vehicle_Api}from\"../api/vehicle_api\";import AddServiceDialog from\"../components/forms/addService\";import BPNotification from\"../components/common/BPNotification\";import{requestDataFormat}from\"../components/common/ErrorFormat\";var HeaderValue1=[\"Service Name\",\"Category\",\"Vehicle CC\",\"Description\",\"Price\",\"Actions\"];var HeaderValue2=[\"Service Name\",\"Category\",\"Description\",\"Price\",\"Actions\"];var Service=function Service(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),data=_React$useState2[0],setData=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),modalOpen=_React$useState4[0],setmodalOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),successModal=_React$useState6[0],setSuccessModal=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),message=_React$useState8[0],setMessage=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),row=_React$useState10[0],setRow=_React$useState10[1];var _React$useState11=React.useState([]),_React$useState12=_slicedToArray(_React$useState11,2),category=_React$useState12[0],setCategory=_React$useState12[1];var _React$useState13=React.useState([]),_React$useState14=_slicedToArray(_React$useState13,2),vehicle=_React$useState14[0],setVehicle=_React$useState14[1];var _React$useState15=React.useState([]),_React$useState16=_slicedToArray(_React$useState15,2),filterOption1=_React$useState16[0],setFilterOption1=_React$useState16[1];var _React$useState17=React.useState([]),_React$useState18=_slicedToArray(_React$useState17,2),filterOption2=_React$useState18[0],setFilterOption2=_React$useState18[1];var _React$useState19=React.useState([]),_React$useState20=_slicedToArray(_React$useState19,2),filterData2=_React$useState20[0],setFilterData2=_React$useState20[1];var _React$useState21=React.useState([]),_React$useState22=_slicedToArray(_React$useState21,2),filterData1=_React$useState22[0],setFilterData1=_React$useState22[1];var _React$useState23=React.useState(\"\"),_React$useState24=_slicedToArray(_React$useState23,2),selected=_React$useState24[0],setSelected=_React$useState24[1];var _React$useState25=React.useState(false),_React$useState26=_slicedToArray(_React$useState25,2),loading=_React$useState26[0],setLoading=_React$useState26[1];var _React$useState27=React.useState(false),_React$useState28=_slicedToArray(_React$useState27,2),btnLoading=_React$useState28[0],setBtnLoading=_React$useState28[1];var addService=function addService(){setRow(false);setmodalOpen(!modalOpen);};var closeModal=function closeModal(){setmodalOpen(!modalOpen);};var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,category,vehicle;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Service_Api.Get_Service();case 2:res=_context.sent;_context.next=5;return Category_Api.Get_Category();case 5:category=_context.sent;_context.next=8;return Vehicle_Api.Get_Vehicle();case 8:vehicle=_context.sent;if(!(res.code===200)){_context.next=20;break;}setData(res.data.message);setCategory(category.data.message);setVehicle(vehicle.data.messsage);setFilterData1(res.data.message.filter(function(x){return x.service_type===\"bike service\";}));setFilterData2(res.data.message.filter(function(x){return x.service_type===\"battery service\";}));setFilterOption1(_toConsumableArray(new Set(res.data.message.filter(function(x){return x.service_type===\"bike service\";}).map(function(el){return el.service_name;}))));setFilterOption2(_toConsumableArray(new Set(res.data.message.filter(function(x){return x.service_type===\"battery service\";}).map(function(el){return el.service_name;}))));setLoading(false);_context.next=22;break;case 20:setLoading(false);return _context.abrupt(\"return\",[]);case 22:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();var _submit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(fields){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setBtnLoading(true);_context2.next=3;return Service_Api.Add_Servie(fields);case 3:res=_context2.sent;if(res.code===200){setmodalOpen(false);setBtnLoading(false);showToast(requestDataFormat.errorHandler(res.data.message));getData();}else{setBtnLoading(false);showToast(requestDataFormat.errorHandler(res.data.error.message));}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function submit(_x){return _ref2.apply(this,arguments);};}();var _Update=function Update(row){setRow(row);setmodalOpen(true);};var Update_Serice=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(fields,id){var row1,data1,obj,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setBtnLoading(true);row1=data.filter(function(x){return x._id===id;})[0];data1={};if(row1.service_name!==fields.data.service_name){data1=Object.assign(data1,{service_name:fields.data.service_name});}if(row1.description!==fields.data.description){data1=Object.assign(data1,{description:fields.data.description});}if(row1.price!==fields.data.price){data1=Object.assign(data1,{price:fields.data.price});}if(row1.tax!==fields.data.tax){data1=Object.assign(data1,{tax:fields.data.tax});}obj={data:data1};_context3.next=10;return Service_Api.Update_Service(row1._id,obj);case 10:res=_context3.sent;if(res.code===200){setmodalOpen(false);setBtnLoading(false);showToast(requestDataFormat.errorHandler(res.data.message));getData();}else{setBtnLoading(false);showToast(requestDataFormat.errorHandler(res.data.error.message));}case 12:case\"end\":return _context3.stop();}}},_callee3);}));return function Update_Serice(_x2,_x3){return _ref3.apply(this,arguments);};}();var getVehicleCC=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(vehicle){var vehicle_cc;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return Vehicle_Api.Get_Vehicle_by_name(vehicle);case 2:vehicle_cc=_context4.sent;if(!(vehicle_cc.code===200)){_context4.next=5;break;}return _context4.abrupt(\"return\",vehicle_cc.data.messsage);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function getVehicleCC(_x4){return _ref4.apply(this,arguments);};}();var onchangeOption1=function onchangeOption1(e,opt){if(opt){setSelected(opt);setFilterData1(data.filter(function(x){return x.service_name===opt&&x.service_type===\"bike service\";}));}else{setFilterData1(data.filter(function(x){return x.service_type==\"bike service\";}));}};var onchangeOption2=function onchangeOption2(e,opt){if(opt){setSelected(opt);setFilterData2(data.filter(function(x){return x.service_name===opt&&x.service_type===\"battery service\";}));}else{setFilterData2(data.filter(function(x){return x.service_type==\"battery service\";}));}};var showToast=function showToast(msg){setSuccessModal(true);setTimeout(function(){setSuccessModal(false);},3000);setMessage(msg);};React.useEffect(function(){setLoading(true);getData();},[]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(CommonTable,{loading:loading,data:filterData1,Header:HeaderValue1,selected:selected,filterOption:filterOption1,onchangeOption:function onchangeOption(e,opt){return onchangeOption1(e,opt);},Update:function Update(row){return _Update(row);},buttonLabel:\"Add Service\",onClick:function onClick(res){return addService(res);}}),/*#__PURE__*/React.createElement(CommonTable,{loading:loading,data:filterData2,Header:HeaderValue2,selected:selected,page:\"service\",filterOption:filterOption2,onchangeOption:function onchangeOption(e,opt){return onchangeOption2(e,opt);},Update:function Update(row){return _Update(row);},buttonLabel:\"Add Service\",onClick:function onClick(res){return addService(res);}}),modalOpen&&/*#__PURE__*/React.createElement(AddServiceDialog,{closeModal:closeModal,fields:row,showToast:showToast,vehicleCC:function vehicleCC(vehicle){return getVehicleCC(vehicle);},category:category,vehicle:vehicle,btnLoading:btnLoading,update:function update(updated,id){return Update_Serice(updated,id);},submit:function submit(fields){return _submit(fields);}}),successModal&&/*#__PURE__*/React.createElement(BPNotification,{message:message}));};export default Service;","map":{"version":3,"sources":["/home/selvi/Desktop/My App Pro/vehicle-app/src/views/Service.js"],"names":["React","CommonTable","Service_Api","Category_Api","Vehicle_Api","AddServiceDialog","BPNotification","requestDataFormat","HeaderValue1","HeaderValue2","Service","useState","data","setData","modalOpen","setmodalOpen","successModal","setSuccessModal","message","setMessage","row","setRow","category","setCategory","vehicle","setVehicle","filterOption1","setFilterOption1","filterOption2","setFilterOption2","filterData2","setFilterData2","filterData1","setFilterData1","selected","setSelected","loading","setLoading","btnLoading","setBtnLoading","addService","closeModal","getData","Get_Service","res","Get_Category","Get_Vehicle","code","messsage","filter","x","service_type","Set","map","el","service_name","submit","fields","Add_Servie","showToast","errorHandler","error","Update","Update_Serice","id","row1","_id","data1","Object","assign","description","price","tax","obj","Update_Service","getVehicleCC","Get_Vehicle_by_name","vehicle_cc","onchangeOption1","e","opt","onchangeOption2","msg","setTimeout","useEffect","updated"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport CommonTable from \"../components/common/CommonTable\";\nimport { Service_Api } from \"../api/service_api\";\nimport { Category_Api } from \"../api/category_api\";\nimport { Vehicle_Api } from \"../api/vehicle_api\";\nimport AddServiceDialog from \"../components/forms/addService\";\nimport BPNotification from \"../components/common/BPNotification\";\nimport { requestDataFormat } from \"../components/common/ErrorFormat\";\n\nconst HeaderValue1 = [\n  \"Service Name\",\n  \"Category\",\n  \"Vehicle CC\",\n  \"Description\",\n  \"Price\",\n  \"Actions\"\n];\n\nconst HeaderValue2 = [\n  \"Service Name\",\n  \"Category\",\n  \"Description\",\n  \"Price\",\n  \"Actions\"\n];\n\nconst Service = () => {\n  const [data, setData] = React.useState([]);\n  const [modalOpen, setmodalOpen] = React.useState(false);\n  const [successModal, setSuccessModal] = React.useState(false);\n  const [message, setMessage] = React.useState(false);\n  const [row, setRow] = React.useState(false);\n  const [category, setCategory] = React.useState([]);\n  const [vehicle, setVehicle] = React.useState([]);\n  const [filterOption1, setFilterOption1] = React.useState([]);\n  const [filterOption2, setFilterOption2] = React.useState([]);\n  const [filterData2, setFilterData2] = React.useState([]);\n  const [filterData1, setFilterData1] = React.useState([]);\n  const [selected, setSelected] = React.useState(\"\");\n  const [loading, setLoading] = React.useState(false);\n  const [btnLoading, setBtnLoading] = React.useState(false);\n\n  const addService = () => {\n    setRow(false);\n    setmodalOpen(!modalOpen);\n  };\n\n  const closeModal = () => {\n    setmodalOpen(!modalOpen);\n  };\n\n  const getData = async () => {\n    const res = await Service_Api.Get_Service();\n    const category = await Category_Api.Get_Category();\n    const vehicle = await Vehicle_Api.Get_Vehicle();\n    if (res.code === 200) {\n      setData(res.data.message);\n      setCategory(category.data.message);\n      setVehicle(vehicle.data.messsage);\n      setFilterData1(\n        res.data.message.filter(x => x.service_type === \"bike service\")\n      );\n      setFilterData2(\n        res.data.message.filter(x => x.service_type === \"battery service\")\n      );\n      setFilterOption1([\n        ...new Set(\n          res.data.message\n            .filter(x => x.service_type === \"bike service\")\n            .map(function(el) {\n              return el.service_name;\n            })\n        )\n      ]);\n      setFilterOption2([\n        ...new Set(\n          res.data.message\n            .filter(x => x.service_type === \"battery service\")\n            .map(function(el) {\n              return el.service_name;\n            })\n        )\n      ]);\n      setLoading(false);\n    } else {\n      setLoading(false);\n      return [];\n    }\n  };\n\n  const submit = async fields => {\n    setBtnLoading(true);\n    const res = await Service_Api.Add_Servie(fields);\n    if (res.code === 200) {\n      setmodalOpen(false);\n      setBtnLoading(false);\n      showToast(requestDataFormat.errorHandler(res.data.message));\n      getData();\n    } else {\n      setBtnLoading(false);\n      showToast(requestDataFormat.errorHandler(res.data.error.message));\n    }\n  };\n\n  const Update = row => {\n    setRow(row);\n    setmodalOpen(true);\n  };\n\n  const Update_Serice = async (fields, id) => {\n    setBtnLoading(true);\n    const row1 = data.filter(x => x._id === id)[0];\n    let data1 = {};\n    if (row1.service_name !== fields.data.service_name) {\n      data1 = Object.assign(data1, { service_name: fields.data.service_name });\n    }\n    if (row1.description !== fields.data.description) {\n      data1 = Object.assign(data1, { description: fields.data.description });\n    }\n    if (row1.price !== fields.data.price) {\n      data1 = Object.assign(data1, { price: fields.data.price });\n    }\n    if (row1.tax !== fields.data.tax) {\n      data1 = Object.assign(data1, { tax: fields.data.tax });\n    }\n    const obj = {\n      data: data1\n    };\n    const res = await Service_Api.Update_Service(row1._id, obj);\n    if (res.code === 200) {\n      setmodalOpen(false);\n      setBtnLoading(false);\n      showToast(requestDataFormat.errorHandler(res.data.message));\n      getData();\n    } else {\n      setBtnLoading(false);\n      showToast(requestDataFormat.errorHandler(res.data.error.message));\n    }\n  };\n\n  const getVehicleCC = async vehicle => {\n    const vehicle_cc = await Vehicle_Api.Get_Vehicle_by_name(vehicle);\n    if (vehicle_cc.code === 200) {\n      return vehicle_cc.data.messsage;\n    }\n  };\n\n  const onchangeOption1 = (e, opt) => {\n    if (opt) {\n      setSelected(opt);\n      setFilterData1(\n        data.filter(\n          x => x.service_name === opt && x.service_type === \"bike service\"\n        )\n      );\n    } else {\n      setFilterData1(data.filter(x => x.service_type == \"bike service\"));\n    }\n  };\n\n  const onchangeOption2 = (e, opt) => {\n    if (opt) {\n      setSelected(opt);\n      setFilterData2(\n        data.filter(\n          x => x.service_name === opt && x.service_type === \"battery service\"\n        )\n      );\n    } else {\n      setFilterData2(data.filter(x => x.service_type == \"battery service\"));\n    }\n  };\n\n  const showToast = msg => {\n    setSuccessModal(true);\n    setTimeout(() => {\n      setSuccessModal(false);\n    }, 3000);\n    setMessage(msg);\n  };\n\n  React.useEffect(() => {\n    setLoading(true);\n    getData();\n  }, []);\n\n  return (\n    <React.Fragment>\n      <CommonTable\n        loading={loading}\n        data={filterData1}\n        Header={HeaderValue1}\n        selected={selected}\n        filterOption={filterOption1}\n        onchangeOption={(e, opt) => onchangeOption1(e, opt)}\n        Update={row => Update(row)}\n        buttonLabel={\"Add Service\"}\n        onClick={res => addService(res)}\n      />\n      <CommonTable\n        loading={loading}\n        data={filterData2}\n        Header={HeaderValue2}\n        selected={selected}\n        page={\"service\"}\n        filterOption={filterOption2}\n        onchangeOption={(e, opt) => onchangeOption2(e, opt)}\n        Update={row => Update(row)}\n        buttonLabel={\"Add Service\"}\n        onClick={res => addService(res)}\n      />\n      {modalOpen && (\n        <AddServiceDialog\n          closeModal={closeModal}\n          fields={row}\n          showToast={showToast}\n          vehicleCC={vehicle => getVehicleCC(vehicle)}\n          category={category}\n          vehicle={vehicle}\n          btnLoading={btnLoading}\n          update={(updated, id) => Update_Serice(updated, id)}\n          submit={fields => submit(fields)}\n        />\n      )}\n      {successModal && <BPNotification message={message} />}\n    </React.Fragment>\n  );\n};\n\nexport default Service;\n"]},"metadata":{},"sourceType":"module"}