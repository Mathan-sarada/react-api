{"ast":null,"code":"import _regeneratorRuntime from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React from\"react\";import store from\"store\";import{useHistory}from\"react-router-dom\";import AppBar from\"@material-ui/core/AppBar\";import CssBaseline from\"@material-ui/core/CssBaseline\";import{Divider,Menu,MenuItem}from\"@material-ui/core\";import Drawer from\"@material-ui/core/Drawer\";import Hidden from\"@material-ui/core/Hidden\";import IconButton from\"@material-ui/core/IconButton\";import List from\"@material-ui/core/List\";import ListItem from\"@material-ui/core/ListItem\";import ListItemIcon from\"@material-ui/core/ListItemIcon\";import ListItemText from\"@material-ui/core/ListItemText\";import ArrowRight from\"@material-ui/icons/ArrowRight\";import MenuIcon from\"@material-ui/icons/Menu\";import Toolbar from\"@material-ui/core/Toolbar\";import Typography from\"@material-ui/core/Typography\";import AccountCircle from\"@material-ui/icons/AccountCircle\";import{makeStyles,useTheme}from\"@material-ui/core/styles\";import{User_api}from\"../api/user_api\";import Badge from\"@material-ui/core/Badge\";import NotificationsIcon from\"@material-ui/icons/Notifications\";import{Notification_Api}from\"../api/notification_api\";var drawerWidth=240;var useStyles=makeStyles(function(theme){return{root:{display:\"flex\"},drawer:_defineProperty({},theme.breakpoints.up(\"sm\"),{width:drawerWidth,flexShrink:0}),title:{flexGrow:1},appBar:_defineProperty({background:\"#3f94b5f2\"},theme.breakpoints.up(\"sm\"),{width:\"calc(100% - \".concat(drawerWidth,\"px)\"),marginLeft:drawerWidth}),menuButton:_defineProperty({marginRight:theme.spacing(2)},theme.breakpoints.up(\"sm\"),{display:\"none\"}),// necessary for content to be below app bar\ntoolbar:theme.mixins.toolbar,drawerPaper:{width:drawerWidth},content:{flexGrow:1,padding:theme.spacing(3)},sectionDesktop:_defineProperty({display:\"none\"},theme.breakpoints.up(\"md\"),{display:\"flex\"}),sectionMobile:_defineProperty({display:\"flex\"},theme.breakpoints.up(\"md\"),{display:\"none\"})};});function Mainbar(_ref){var children=_ref.children;var classes=useStyles();var theme=useTheme();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),mobileOpen=_React$useState2[0],setMobileOpen=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),data=_React$useState4[0],setData=_React$useState4[1];var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),anchorEl=_React$useState6[0],setAnchorEl=_React$useState6[1];var open=Boolean(anchorEl);var _React$useState7=React.useState(null),_React$useState8=_slicedToArray(_React$useState7,2),anchorElNote=_React$useState8[0],setAnchorElNote=_React$useState8[1];var openNote=Boolean(anchorElNote);var history=useHistory();var currentLocation=window.location.pathname;var getData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Notification_Api.Get_Notification();case 2:res=_context.sent;if(!(res.code===200)){_context.next=7;break;}setData(res.data.message);_context.next=8;break;case 7:return _context.abrupt(\"return\",[]);case 8:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref2.apply(this,arguments);};}();var handleDrawerToggle=function handleDrawerToggle(){setMobileOpen(!mobileOpen);};var handleMenu=function handleMenu(event){setAnchorEl(event.currentTarget);};var handleClose=function handleClose(){setAnchorEl(null);};var handleMenuNote=function handleMenuNote(event){setAnchorElNote(event.currentTarget);};var handleCloseNote=function handleCloseNote(){setAnchorElNote(null);};var clickNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var res1;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!id){_context2.next=5;break;}_context2.next=3;return Notification_Api.Update_Notification(id);case 3:res1=_context2.sent;if(res1.code===200){getData();}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function clickNote(_x){return _ref3.apply(this,arguments);};}();var logout=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:history.push(\"/\");store.remove(\"secretKey\");store.remove(\"apiKey\");store.remove(\"adminKey\");_context3.next=6;return User_api.SignOut();case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function logout(){return _ref4.apply(this,arguments);};}();var handleClick=function handleClick(text){history.push(\"/\".concat(text));};React.useEffect(function(){if(currentLocation!==\"/\"||currentLocation!==\"/login\"){if(!store.get(\"apiKey\")){history.push(\"/login\");}}},[]);React.useEffect(function(){getData();},[]);var drawer=/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:classes.toolbar}),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(List,null,[\"Category\",\"Vehicle\",\"Service\",\"Vendor\",\"Orders\",\"Location\"].map(function(text,index){return/*#__PURE__*/React.createElement(ListItem,{button:true,key:text,onClick:function onClick(){return handleClick(text);}},/*#__PURE__*/React.createElement(ListItemIcon,null,/*#__PURE__*/React.createElement(ArrowRight,null)),/*#__PURE__*/React.createElement(ListItemText,{primary:text}));})));return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(CssBaseline,null),currentLocation!==\"/login\"&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(AppBar,{position:\"fixed\",className:classes.appBar},/*#__PURE__*/React.createElement(Toolbar,null,/*#__PURE__*/React.createElement(IconButton,{color:\"inherit\",\"aria-label\":\"open drawer\",edge:\"start\",onClick:handleDrawerToggle,className:classes.menuButton},/*#__PURE__*/React.createElement(MenuIcon,null)),/*#__PURE__*/React.createElement(Typography,{variant:\"h6\",noWrap:true,className:classes.title},\"Vehicle App\"),/*#__PURE__*/React.createElement(\"div\",{className:classes.sectionDesktop},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"show 17 new notifications\",color:\"inherit\",onClick:handleMenuNote},/*#__PURE__*/React.createElement(Badge,{badgeContent:data.length,color:\"secondary\"},/*#__PURE__*/React.createElement(NotificationsIcon,null))),/*#__PURE__*/React.createElement(Menu,{id:\"menu-appbar\",anchorEl:anchorElNote,anchorOrigin:{vertical:\"top\",horizontal:\"right\"},keepMounted:true,transformOrigin:{vertical:\"top\",horizontal:\"right\"},open:openNote,onClose:handleCloseNote},data&&data.length>0&&data.map(function(res){return/*#__PURE__*/React.createElement(MenuItem,{key:res._id,onClick:function onClick(id){return clickNote(res._id);}},res.message);})),/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"account of current user\",\"aria-controls\":\"menu-appbar\",\"aria-haspopup\":\"true\",onClick:handleMenu,color:\"inherit\"},/*#__PURE__*/React.createElement(AccountCircle,null)),/*#__PURE__*/React.createElement(Menu,{id:\"menu-appbar\",anchorEl:anchorEl,anchorOrigin:{vertical:\"top\",horizontal:\"right\"},keepMounted:true,transformOrigin:{vertical:\"top\",horizontal:\"right\"},open:open,onClose:handleClose},/*#__PURE__*/React.createElement(MenuItem,{onClick:function onClick(){return logout();}},\"Logout\"))))),/*#__PURE__*/React.createElement(\"nav\",{className:classes.drawer,\"aria-label\":\"mailbox folders\"},/*#__PURE__*/React.createElement(Hidden,{smUp:true,implementation:\"css\"},/*#__PURE__*/React.createElement(Drawer,{variant:\"temporary\",anchor:theme.direction===\"rtl\"?\"right\":\"left\",open:mobileOpen,onClose:handleDrawerToggle,classes:{paper:classes.drawerPaper},ModalProps:{keepMounted:true// Better open performance on mobile.\n}},drawer)),/*#__PURE__*/React.createElement(Hidden,{xsDown:true,implementation:\"css\"},/*#__PURE__*/React.createElement(Drawer,{classes:{paper:classes.drawerPaper},variant:\"permanent\",open:true},drawer)))),/*#__PURE__*/React.createElement(\"main\",{className:classes.content},/*#__PURE__*/React.createElement(\"div\",{className:classes.toolbar}),/*#__PURE__*/React.createElement(\"div\",null,children)));}export default Mainbar;","map":{"version":3,"sources":["/home/selvi/Desktop/My App Pro/vehicle-app/src/layouts/Mainbar.js"],"names":["React","store","useHistory","AppBar","CssBaseline","Divider","Menu","MenuItem","Drawer","Hidden","IconButton","List","ListItem","ListItemIcon","ListItemText","ArrowRight","MenuIcon","Toolbar","Typography","AccountCircle","makeStyles","useTheme","User_api","Badge","NotificationsIcon","Notification_Api","drawerWidth","useStyles","theme","root","display","drawer","breakpoints","up","width","flexShrink","title","flexGrow","appBar","background","marginLeft","menuButton","marginRight","spacing","toolbar","mixins","drawerPaper","content","padding","sectionDesktop","sectionMobile","Mainbar","children","classes","useState","mobileOpen","setMobileOpen","data","setData","anchorEl","setAnchorEl","open","Boolean","anchorElNote","setAnchorElNote","openNote","history","currentLocation","window","location","pathname","getData","Get_Notification","res","code","message","handleDrawerToggle","handleMenu","event","currentTarget","handleClose","handleMenuNote","handleCloseNote","clickNote","id","Update_Notification","res1","logout","push","remove","SignOut","handleClick","text","useEffect","get","map","index","length","vertical","horizontal","_id","direction","paper","keepMounted"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport store from \"store\";\nimport PropTypes from \"prop-types\";\nimport { useHistory } from \"react-router-dom\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { Divider, Menu, MenuItem } from \"@material-ui/core\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport Hidden from \"@material-ui/core/Hidden\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ArrowRight from \"@material-ui/icons/ArrowRight\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport AccountCircle from \"@material-ui/icons/AccountCircle\";\nimport { makeStyles, useTheme } from \"@material-ui/core/styles\";\nimport { User_api } from \"../api/user_api\";\nimport Badge from \"@material-ui/core/Badge\";\nimport NotificationsIcon from \"@material-ui/icons/Notifications\";\nimport { Notification_Api } from \"../api/notification_api\";\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\"\n  },\n  drawer: {\n    [theme.breakpoints.up(\"sm\")]: {\n      width: drawerWidth,\n      flexShrink: 0\n    }\n  },\n  title: {\n    flexGrow: 1\n  },\n  appBar: {\n    background: \"#3f94b5f2\",\n    [theme.breakpoints.up(\"sm\")]: {\n      width: `calc(100% - ${drawerWidth}px)`,\n      marginLeft: drawerWidth\n    }\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n    [theme.breakpoints.up(\"sm\")]: {\n      display: \"none\"\n    }\n  },\n  // necessary for content to be below app bar\n  toolbar: theme.mixins.toolbar,\n  drawerPaper: {\n    width: drawerWidth\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3)\n  },\n  sectionDesktop: {\n    display: \"none\",\n    [theme.breakpoints.up(\"md\")]: {\n      display: \"flex\"\n    }\n  },\n  sectionMobile: {\n    display: \"flex\",\n    [theme.breakpoints.up(\"md\")]: {\n      display: \"none\"\n    }\n  }\n}));\n\nfunction Mainbar({ children }) {\n  const classes = useStyles();\n  const theme = useTheme();\n  const [mobileOpen, setMobileOpen] = React.useState(false);\n  const [data, setData] = React.useState([]);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const open = Boolean(anchorEl);\n  const [anchorElNote, setAnchorElNote] = React.useState(null);\n  const openNote = Boolean(anchorElNote);\n  const history = useHistory();\n  var currentLocation = window.location.pathname;\n\n  const getData = async () => {\n    const res = await Notification_Api.Get_Notification();\n    if (res.code === 200) {\n      setData(res.data.message);\n    } else {\n      return [];\n    }\n  };\n\n  const handleDrawerToggle = () => {\n    setMobileOpen(!mobileOpen);\n  };\n\n  const handleMenu = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleMenuNote = event => {\n    setAnchorElNote(event.currentTarget);\n  };\n\n  const handleCloseNote = () => {\n    setAnchorElNote(null);\n  };\n\n  const clickNote = async id => {\n    if (id) {\n      const res1 = await Notification_Api.Update_Notification(id);\n      if (res1.code === 200) {\n        getData();\n      }\n    }\n  };\n\n  const logout = async () => {\n    history.push(`/`);\n    store.remove(\"secretKey\");\n    store.remove(\"apiKey\");\n    store.remove(\"adminKey\");\n    await User_api.SignOut();\n  };\n\n  const handleClick = text => {\n    history.push(`/${text}`);\n  };\n\n  React.useEffect(() => {\n    if (currentLocation !== \"/\" || currentLocation !== \"/login\") {\n      if (!store.get(\"apiKey\")) {\n        history.push(`/login`);\n      }\n    }\n  }, []);\n\n  React.useEffect(() => {\n    getData();\n  }, []);\n\n  const drawer = (\n    <div>\n      <div className={classes.toolbar} />\n      <Divider />\n      <List>\n        {[\"Category\", \"Vehicle\", \"Service\", \"Vendor\", \"Orders\", \"Location\"].map(\n          (text, index) => (\n            <ListItem button key={text} onClick={() => handleClick(text)}>\n              <ListItemIcon>\n                <ArrowRight />\n              </ListItemIcon>\n              <ListItemText primary={text} />\n            </ListItem>\n          )\n        )}\n      </List>\n    </div>\n  );\n\n  return (\n    <div className={classes.root}>\n      <CssBaseline />\n      {currentLocation !== \"/login\" && (\n        <React.Fragment>\n          <AppBar position=\"fixed\" className={classes.appBar}>\n            <Toolbar>\n              <IconButton\n                color=\"inherit\"\n                aria-label=\"open drawer\"\n                edge=\"start\"\n                onClick={handleDrawerToggle}\n                className={classes.menuButton}\n              >\n                <MenuIcon />\n              </IconButton>\n              <Typography variant=\"h6\" noWrap className={classes.title}>\n                Vehicle App\n              </Typography>\n              <div className={classes.sectionDesktop}>\n                <IconButton\n                  aria-label=\"show 17 new notifications\"\n                  color=\"inherit\"\n                  onClick={handleMenuNote}\n                >\n                  <Badge badgeContent={data.length} color=\"secondary\">\n                    <NotificationsIcon />\n                  </Badge>\n                </IconButton>\n                <Menu\n                  id=\"menu-appbar\"\n                  anchorEl={anchorElNote}\n                  anchorOrigin={{\n                    vertical: \"top\",\n                    horizontal: \"right\"\n                  }}\n                  keepMounted\n                  transformOrigin={{\n                    vertical: \"top\",\n                    horizontal: \"right\"\n                  }}\n                  open={openNote}\n                  onClose={handleCloseNote}\n                >\n                  {data &&\n                    data.length > 0 &&\n                    data.map(res => {\n                      return (\n                        <MenuItem\n                          key={res._id}\n                          onClick={id => clickNote(res._id)}\n                        >\n                          {res.message}\n                        </MenuItem>\n                      );\n                    })}\n                </Menu>\n                <IconButton\n                  aria-label=\"account of current user\"\n                  aria-controls=\"menu-appbar\"\n                  aria-haspopup=\"true\"\n                  onClick={handleMenu}\n                  color=\"inherit\"\n                >\n                  <AccountCircle />\n                </IconButton>\n                <Menu\n                  id=\"menu-appbar\"\n                  anchorEl={anchorEl}\n                  anchorOrigin={{\n                    vertical: \"top\",\n                    horizontal: \"right\"\n                  }}\n                  keepMounted\n                  transformOrigin={{\n                    vertical: \"top\",\n                    horizontal: \"right\"\n                  }}\n                  open={open}\n                  onClose={handleClose}\n                >\n                  <MenuItem onClick={() => logout()}>Logout</MenuItem>\n                </Menu>\n              </div>\n              {/* {\n                <div>\n                  <IconButton\n                    aria-label=\"show 11 new notifications\"\n                    color=\"inherit\"\n                  >\n                    <Badge badgeContent={11} color=\"secondary\">\n                      <NotificationsIcon />\n                    </Badge>\n                  </IconButton>\n                  <p>Notifications</p>\n                  <IconButton\n                    aria-label=\"account of current user\"\n                    aria-controls=\"menu-appbar\"\n                    aria-haspopup=\"true\"\n                    onClick={handleMenu}\n                    color=\"inherit\"\n                  >\n                    <AccountCircle />\n                  </IconButton>\n                  <Menu\n                    id=\"menu-appbar\"\n                    anchorEl={anchorEl}\n                    anchorOrigin={{\n                      vertical: \"top\",\n                      horizontal: \"right\"\n                    }}\n                    keepMounted\n                    transformOrigin={{\n                      vertical: \"top\",\n                      horizontal: \"right\"\n                    }}\n                    open={open}\n                    onClose={handleClose}\n                  >\n                    <MenuItem onClick={() => logout()}>Logout</MenuItem>\n                  </Menu>\n                </div>\n              } */}\n            </Toolbar>\n          </AppBar>\n          <nav className={classes.drawer} aria-label=\"mailbox folders\">\n            {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\n            <Hidden smUp implementation=\"css\">\n              <Drawer\n                variant=\"temporary\"\n                anchor={theme.direction === \"rtl\" ? \"right\" : \"left\"}\n                open={mobileOpen}\n                onClose={handleDrawerToggle}\n                classes={{\n                  paper: classes.drawerPaper\n                }}\n                ModalProps={{\n                  keepMounted: true // Better open performance on mobile.\n                }}\n              >\n                {drawer}\n              </Drawer>\n            </Hidden>\n            <Hidden xsDown implementation=\"css\">\n              <Drawer\n                classes={{\n                  paper: classes.drawerPaper\n                }}\n                variant=\"permanent\"\n                open\n              >\n                {drawer}\n              </Drawer>\n            </Hidden>\n          </nav>\n        </React.Fragment>\n      )}\n\n      <main className={classes.content}>\n        <div className={classes.toolbar} />\n        <div>{children}</div>\n      </main>\n    </div>\n  );\n}\n\nMainbar.propTypes = {\n  window: PropTypes.func\n};\n\nexport default Mainbar;\n"]},"metadata":{},"sourceType":"module"}