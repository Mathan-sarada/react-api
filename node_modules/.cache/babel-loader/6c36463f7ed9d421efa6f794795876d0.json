{"ast":null,"code":"import _regeneratorRuntime from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import CommonTable from\"../components/common/CommonTable\";import AddVendorDialog from\"../components/forms/addVendor\";import{Vendor_Api}from\"../api/vendor_api\";import BPNotification from\"../components/common/BPNotification\";import{requestDataFormat}from\"../components/common/ErrorFormat\";var HeaderValue=[\"Vendor Name\",\"Mobile\",\"Email\",\"Location\",\"Action\"];var Vendor=function Vendor(props){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),modalOpen=_React$useState2[0],setmodalOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),successModal=_React$useState4[0],setSuccessModal=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),message=_React$useState6[0],setMessage=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),row=_React$useState8[0],setRow=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),data=_React$useState10[0],setData=_React$useState10[1];var _React$useState11=React.useState([]),_React$useState12=_slicedToArray(_React$useState11,2),filterOption=_React$useState12[0],setFilterOption=_React$useState12[1];var _React$useState13=React.useState([]),_React$useState14=_slicedToArray(_React$useState13,2),filterData=_React$useState14[0],setFilterData=_React$useState14[1];var _React$useState15=React.useState(\"\"),_React$useState16=_slicedToArray(_React$useState15,2),selected=_React$useState16[0],setSelected=_React$useState16[1];var _React$useState17=React.useState(false),_React$useState18=_slicedToArray(_React$useState17,2),loading=_React$useState18[0],setLoading=_React$useState18[1];var _React$useState19=React.useState(false),_React$useState20=_slicedToArray(_React$useState19,2),btnLoading=_React$useState20[0],setBtnLoading=_React$useState20[1];var addVendor=function addVendor(){setRow(false);setmodalOpen(!modalOpen);};var closeModal=function closeModal(){setmodalOpen(!modalOpen);};var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Vendor_Api.Get_Vendor();case 2:res=_context.sent;if(!(res.code===200)){_context.next=10;break;}setData(res.data.message);setFilterData(res.data.message);setFilterOption(_toConsumableArray(new Set(res.data.message.map(function(el){return el.vendor_name;}))));setLoading(false);_context.next=12;break;case 10:setLoading(false);return _context.abrupt(\"return\",[]);case 12:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();var _submit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(fields){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setBtnLoading(true);_context2.next=3;return Vendor_Api.Add_Vendor(fields);case 3:res=_context2.sent;if(res.code===200){setmodalOpen(false);setBtnLoading(false);showToast(requestDataFormat.errorHandler(res.data.message));getData();}else{setBtnLoading(false);showToast(res.data.error.message);}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function submit(_x){return _ref2.apply(this,arguments);};}();var _Update=function Update(row){setRow(row);setmodalOpen(true);};var Update_Vendor=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(fields,id){var row1,data1,obj,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setBtnLoading(true);row1=data.filter(function(x){return x._id===id;})[0];data1={};if(row1.vendor_name!==fields.data.vendor_name){data1=Object.assign(data1,{vendor_name:fields.data.vendor_name});}if(row1.email!==fields.data.email){data1=Object.assign(data1,{email:fields.data.email});}if(row1.mobile!==fields.data.mobile){data1=Object.assign(data1,{mobile:fields.data.mobile});}if(row1.location!==fields.data.location){data1=Object.assign(data1,{location:fields.data.location});}obj={data:data1};_context3.next=10;return Vendor_Api.Update_Vendor(row1._id,obj);case 10:res=_context3.sent;if(res.code===200){setmodalOpen(false);setBtnLoading(false);showToast(requestDataFormat.errorHandler(res.data.message));getData();}else{showToast(requestDataFormat.errorHandler(res.data.error.message));setBtnLoading(false);}case 12:case\"end\":return _context3.stop();}}},_callee3);}));return function Update_Vendor(_x2,_x3){return _ref3.apply(this,arguments);};}();var _onchangeOption=function onchangeOption(e,opt){if(opt){setSelected(opt);setFilterData(data.filter(function(x){return x.vendor_name===opt;}));}else{setFilterData(data);}};var showToast=function showToast(msg){setSuccessModal(true);setTimeout(function(){setSuccessModal(false);},3000);setMessage(msg);};React.useEffect(function(){setLoading(true);getData();},[]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(CommonTable,{loading:loading,Header:HeaderValue,data:filterData,selected:selected,filterOption:filterOption,onchangeOption:function onchangeOption(e,opt){return _onchangeOption(e,opt);},buttonLabel:\"Add Vendor\",Update:function Update(row){return _Update(row);},onClick:function onClick(res){return addVendor(res);}}),modalOpen&&/*#__PURE__*/React.createElement(AddVendorDialog,{closeModal:closeModal,fields:row,showToast:showToast,btnLoading:btnLoading,update:function update(updated,id){return Update_Vendor(updated,id);},submit:function submit(fields){return _submit(fields);}}),successModal&&/*#__PURE__*/React.createElement(BPNotification,{message:message}));};export default Vendor;","map":{"version":3,"sources":["/home/selvi/Desktop/My App Pro/vehicle-app/src/views/Vendor.js"],"names":["React","CommonTable","AddVendorDialog","Vendor_Api","BPNotification","requestDataFormat","HeaderValue","Vendor","props","useState","modalOpen","setmodalOpen","successModal","setSuccessModal","message","setMessage","row","setRow","data","setData","filterOption","setFilterOption","filterData","setFilterData","selected","setSelected","loading","setLoading","btnLoading","setBtnLoading","addVendor","closeModal","getData","Get_Vendor","res","code","Set","map","el","vendor_name","submit","fields","Add_Vendor","showToast","errorHandler","error","Update","Update_Vendor","id","row1","filter","x","_id","data1","Object","assign","email","mobile","location","obj","onchangeOption","e","opt","msg","setTimeout","useEffect","updated"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport CommonTable from \"../components/common/CommonTable\";\nimport AddVendorDialog from \"../components/forms/addVendor\";\nimport { Vendor_Api } from \"../api/vendor_api\";\nimport BPNotification from \"../components/common/BPNotification\";\nimport { requestDataFormat } from \"../components/common/ErrorFormat\";\n\nconst HeaderValue = [\"Vendor Name\", \"Mobile\", \"Email\", \"Location\", \"Action\"];\n\nconst Vendor = props => {\n  const [modalOpen, setmodalOpen] = React.useState(false);\n  const [successModal, setSuccessModal] = React.useState(false);\n  const [message, setMessage] = React.useState(false);\n  const [row, setRow] = React.useState(false);\n  const [data, setData] = React.useState([]);\n  const [filterOption, setFilterOption] = React.useState([]);\n  const [filterData, setFilterData] = React.useState([]);\n  const [selected, setSelected] = React.useState(\"\");\n  const [loading, setLoading] = React.useState(false);\n  const [btnLoading, setBtnLoading] = React.useState(false);\n\n  const addVendor = () => {\n    setRow(false);\n    setmodalOpen(!modalOpen);\n  };\n\n  const closeModal = () => {\n    setmodalOpen(!modalOpen);\n  };\n\n  const getData = async () => {\n    const res = await Vendor_Api.Get_Vendor();\n    if (res.code === 200) {\n      setData(res.data.message);\n      setFilterData(res.data.message);\n      setFilterOption([\n        ...new Set(\n          res.data.message.map(function(el) {\n            return el.vendor_name;\n          })\n        )\n      ]);\n      setLoading(false);\n    } else {\n      setLoading(false);\n      return [];\n    }\n  };\n\n  const submit = async fields => {\n    setBtnLoading(true);\n    const res = await Vendor_Api.Add_Vendor(fields);\n    if (res.code === 200) {\n      setmodalOpen(false);\n      setBtnLoading(false);\n      showToast(requestDataFormat.errorHandler(res.data.message));\n      getData();\n    } else {\n      setBtnLoading(false);\n      showToast(res.data.error.message);\n    }\n  };\n\n  const Update = row => {\n    setRow(row);\n    setmodalOpen(true);\n  };\n\n  const Update_Vendor = async (fields, id) => {\n    setBtnLoading(true);\n    const row1 = data.filter(x => x._id === id)[0];\n    let data1 = {};\n    if (row1.vendor_name !== fields.data.vendor_name) {\n      data1 = Object.assign(data1, { vendor_name: fields.data.vendor_name });\n    }\n    if (row1.email !== fields.data.email) {\n      data1 = Object.assign(data1, { email: fields.data.email });\n    }\n    if (row1.mobile !== fields.data.mobile) {\n      data1 = Object.assign(data1, { mobile: fields.data.mobile });\n    }\n    if (row1.location !== fields.data.location) {\n      data1 = Object.assign(data1, { location: fields.data.location });\n    }\n    const obj = {\n      data: data1\n    };\n    const res = await Vendor_Api.Update_Vendor(row1._id, obj);\n    if (res.code === 200) {\n      setmodalOpen(false);\n      setBtnLoading(false);\n      showToast(requestDataFormat.errorHandler(res.data.message));\n      getData();\n    } else {\n      showToast(requestDataFormat.errorHandler(res.data.error.message));\n      setBtnLoading(false);\n    }\n  };\n\n  const onchangeOption = (e, opt) => {\n    if (opt) {\n      setSelected(opt);\n      setFilterData(data.filter(x => x.vendor_name === opt));\n    } else {\n      setFilterData(data);\n    }\n  };\n\n  const showToast = msg => {\n    setSuccessModal(true);\n    setTimeout(() => {\n      setSuccessModal(false);\n    }, 3000);\n    setMessage(msg);\n  };\n\n  React.useEffect(() => {\n    setLoading(true);\n    getData();\n  }, []);\n\n  return (\n    <React.Fragment>\n      <CommonTable\n        loading={loading}\n        Header={HeaderValue}\n        data={filterData}\n        selected={selected}\n        filterOption={filterOption}\n        onchangeOption={(e, opt) => onchangeOption(e, opt)}\n        buttonLabel={\"Add Vendor\"}\n        Update={row => Update(row)}\n        onClick={res => addVendor(res)}\n      />\n      {modalOpen && (\n        <AddVendorDialog\n          closeModal={closeModal}\n          fields={row}\n          showToast={showToast}\n          btnLoading={btnLoading}\n          update={(updated, id) => Update_Vendor(updated, id)}\n          submit={fields => submit(fields)}\n        />\n      )}\n      {successModal && <BPNotification message={message} />}\n    </React.Fragment>\n  );\n};\n\nexport default Vendor;\n"]},"metadata":{},"sourceType":"module"}