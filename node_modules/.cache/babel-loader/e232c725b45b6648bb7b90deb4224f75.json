{"ast":null,"code":"import _regeneratorRuntime from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment}from\"react\";import CommonTable from\"../components/common/CommonTable\";import{Orders_Api}from\"../api/orders_api\";import AddMobileDialog from\"../components/forms/addMobile\";import BPNotification from\"../components/common/BPNotification\";import{requestDataFormat}from\"../components/common/ErrorFormat\";var HeaderValue=[\"Mobile\",\"Location\",\"Service\",\"Description\",\"Amount\",\"Action\"];var Orders=function Orders(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),modalOpen=_React$useState2[0],setmodalOpen=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),data=_React$useState4[0],setData=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),successModal=_React$useState6[0],setSuccessModal=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),message=_React$useState8[0],setMessage=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),loading=_React$useState10[0],setLoading=_React$useState10[1];var _React$useState11=React.useState(\"\"),_React$useState12=_slicedToArray(_React$useState11,2),orderId=_React$useState12[0],setOrderId=_React$useState12[1];var _React$useState13=React.useState(false),_React$useState14=_slicedToArray(_React$useState13,2),btnLoading=_React$useState14[0],setBtnLoading=_React$useState14[1];var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var orders,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Orders_Api.Get_Orders();case 2:orders=_context.sent;if(!(orders.code===200)){_context.next=10;break;}result=[];if(orders.data.message.length>0){orders.data.message.map(function(x){if(x.orderDetails.length>1){x.orderDetails.map(function(m){m.orderId=x._id;});}else{x.orderDetails[0].orderId=x._id;}Array.prototype.push.apply(result,x.orderDetails);});}setData(result);setLoading(false);_context.next=12;break;case 10:setLoading(false);return _context.abrupt(\"return\",[]);case 12:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();var closeModal=function closeModal(){setmodalOpen(!modalOpen);};var _submit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(fields){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setBtnLoading(true);_context2.next=3;return Orders_Api.verifyMobile(orderId,fields);case 3:res=_context2.sent;if(res.code===200){setmodalOpen(false);setBtnLoading(false);showToast(requestDataFormat.errorHandler(res.data.message));getData();}else{showToast(requestDataFormat.errorHandler(res.data.error.message));setBtnLoading(false);}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function submit(_x){return _ref2.apply(this,arguments);};}();var Update=function Update(id){setOrderId(id);setmodalOpen(true);};var showToast=function showToast(msg){setSuccessModal(true);setTimeout(function(){setSuccessModal(false);},3000);setMessage(msg);};React.useEffect(function(){// setLoading(true);\ngetData();},[]);return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(CommonTable,{loading:loading,Update:Update,Header:HeaderValue,data:data,page:\"orders\"}),modalOpen&&/*#__PURE__*/React.createElement(AddMobileDialog,{closeModal:closeModal,btnLoading:btnLoading,submit:function submit(fields){return _submit(fields);},showToast:showToast}),successModal&&/*#__PURE__*/React.createElement(BPNotification,{message:message}));};export default Orders;","map":{"version":3,"sources":["/home/selvi/Desktop/My App Pro/vehicle-app/src/views/Orders.js"],"names":["React","Fragment","CommonTable","Orders_Api","AddMobileDialog","BPNotification","requestDataFormat","HeaderValue","Orders","useState","modalOpen","setmodalOpen","data","setData","successModal","setSuccessModal","message","setMessage","loading","setLoading","orderId","setOrderId","btnLoading","setBtnLoading","getData","Get_Orders","orders","code","result","length","map","x","orderDetails","m","_id","Array","prototype","push","apply","closeModal","submit","fields","verifyMobile","res","showToast","errorHandler","error","Update","id","msg","setTimeout","useEffect"],"mappings":"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","sourcesContent":["import React, { Fragment } from \"react\";\nimport CommonTable from \"../components/common/CommonTable\";\nimport { Orders_Api } from \"../api/orders_api\";\nimport AddMobileDialog from \"../components/forms/addMobile\";\nimport BPNotification from \"../components/common/BPNotification\";\nimport { requestDataFormat } from \"../components/common/ErrorFormat\";\n\nconst HeaderValue = [\n  \"Mobile\",\n  \"Location\",\n  \"Service\",\n  \"Description\",\n  \"Amount\",\n  \"Action\"\n];\n\nconst Orders = () => {\n  const [modalOpen, setmodalOpen] = React.useState(false);\n  const [data, setData] = React.useState([]);\n  const [successModal, setSuccessModal] = React.useState(false);\n  const [message, setMessage] = React.useState(false);\n  const [loading, setLoading] = React.useState(false);\n  const [orderId, setOrderId] = React.useState(\"\");\n  const [btnLoading, setBtnLoading] = React.useState(false);\n\n  const getData = async () => {\n    const orders = await Orders_Api.Get_Orders();\n    if (orders.code === 200) {\n      const result = [];\n      if (orders.data.message.length > 0) {\n        orders.data.message.map(x => {\n          if (x.orderDetails.length > 1) {\n            x.orderDetails.map(m => {\n              m.orderId = x._id;\n            });\n          } else {\n            x.orderDetails[0].orderId = x._id;\n          }\n          Array.prototype.push.apply(result, x.orderDetails);\n        });\n      }\n      setData(result);\n      setLoading(false);\n    } else {\n      setLoading(false);\n      return [];\n    }\n  };\n\n  const closeModal = () => {\n    setmodalOpen(!modalOpen);\n  };\n\n  const submit = async fields => {\n    setBtnLoading(true);\n    const res = await Orders_Api.verifyMobile(orderId, fields);\n    if (res.code === 200) {\n      setmodalOpen(false);\n      setBtnLoading(false);\n      showToast(requestDataFormat.errorHandler(res.data.message));\n      getData();\n    } else {\n      showToast(requestDataFormat.errorHandler(res.data.error.message));\n      setBtnLoading(false);\n    }\n  };\n\n  const Update = id => {\n    setOrderId(id);\n    setmodalOpen(true);\n  };\n\n  const showToast = msg => {\n    setSuccessModal(true);\n    setTimeout(() => {\n      setSuccessModal(false);\n    }, 3000);\n    setMessage(msg);\n  };\n\n  React.useEffect(() => {\n    // setLoading(true);\n    getData();\n  }, []);\n\n  return (\n    <Fragment>\n      <CommonTable\n        loading={loading}\n        Update={Update}\n        Header={HeaderValue}\n        data={data}\n        page=\"orders\"\n      />\n      {modalOpen && (\n        <AddMobileDialog\n          closeModal={closeModal}\n          btnLoading={btnLoading}\n          submit={fields => submit(fields)}\n          showToast={showToast}\n        />\n      )}\n      {successModal && <BPNotification message={message} />}\n    </Fragment>\n  );\n};\n\nexport default Orders;\n"]},"metadata":{},"sourceType":"module"}