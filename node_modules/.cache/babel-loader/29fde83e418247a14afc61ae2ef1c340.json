{"ast":null,"code":"import _regeneratorRuntime from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import CommonTable from\"../components/common/CommonTable\";import AddVehicleDialog from\"../components/forms/addVehicle\";import{Vehicle_Api}from\"../api/vehicle_api\";import BPNotification from\"../components/common/BPNotification\";import{requestDataFormat}from\"../components/common/ErrorFormat\";var HeaderValue=[\"Vehicle CC\",\"Status\",\"Actions\"];var Vehicle=function Vehicle(props){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),modalOpen=_React$useState2[0],setmodalOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),successModal=_React$useState4[0],setSuccessModal=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),message=_React$useState6[0],setMessage=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),row=_React$useState8[0],setRow=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),data=_React$useState10[0],setData=_React$useState10[1];var _React$useState11=React.useState([]),_React$useState12=_slicedToArray(_React$useState11,2),filterOption=_React$useState12[0],setFilterOption=_React$useState12[1];var _React$useState13=React.useState([]),_React$useState14=_slicedToArray(_React$useState13,2),filterData=_React$useState14[0],setFilterData=_React$useState14[1];var _React$useState15=React.useState(\"\"),_React$useState16=_slicedToArray(_React$useState15,2),selected=_React$useState16[0],setSelected=_React$useState16[1];var _React$useState17=React.useState(false),_React$useState18=_slicedToArray(_React$useState17,2),loading=_React$useState18[0],setLoading=_React$useState18[1];var _React$useState19=React.useState(false),_React$useState20=_slicedToArray(_React$useState19,2),btnLoading=_React$useState20[0],setBtnLoading=_React$useState20[1];var addVehicle=function addVehicle(){setRow(false);setmodalOpen(!modalOpen);};var closeModal=function closeModal(){setmodalOpen(!modalOpen);};var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Vehicle_Api.Get_Vehicle();case 2:res=_context.sent;if(!(res.code===200)){_context.next=10;break;}setData(res.data.messsage);setFilterData(res.data.messsage);setFilterOption(_toConsumableArray(new Set(res.data.messsage.map(function(el){return el.vehicle_cc;}))));setLoading(false);_context.next=12;break;case 10:setLoading(false);return _context.abrupt(\"return\",[]);case 12:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();var _submit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(fields){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setBtnLoading(true);_context2.next=3;return Vehicle_Api.Add_Vehicle(fields);case 3:res=_context2.sent;if(res.code===200){setmodalOpen(false);setBtnLoading(false);showToast(requestDataFormat.errorHandler(res.data.message));getData();}else{setBtnLoading(false);showToast(requestDataFormat.errorHandler(res.data.error.message));}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function submit(_x){return _ref2.apply(this,arguments);};}();var _Update=function Update(row){setRow(row);setmodalOpen(true);};var Update_Vehicle=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(fields,id){var row1,data1,obj,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setBtnLoading(true);row1=data.filter(function(x){return x._id===id;})[0];data1={};if(row1.vehicle_name!==fields.data.vehicle_name){data1=Object.assign(data1,{vehicle_name:fields.data.vehicle_name});}if(row1.vehicle_cc!==fields.data.vehicle_cc){data1=Object.assign(data1,{vehicle_cc:fields.data.vehicle_cc});}if(row1.status!==fields.data.status){data1=Object.assign(data1,{status:fields.data.status});}obj={data:data1};_context3.next=9;return Vehicle_Api.Update_Vehicle(row1._id,obj);case 9:res=_context3.sent;if(res.code===200){setmodalOpen(false);showToast(requestDataFormat.errorHandler(res.data.message));setBtnLoading(false);getData();}else{showToast(requestDataFormat.errorHandler(res.data.error.message));setBtnLoading(false);}case 11:case\"end\":return _context3.stop();}}},_callee3);}));return function Update_Vehicle(_x2,_x3){return _ref3.apply(this,arguments);};}();var _onchangeOption=function onchangeOption(e,opt){if(opt){setSelected(opt);setFilterData(data.filter(function(x){return x.vehicle_cc===opt;}));}else{setFilterData(data);}};var showToast=function showToast(msg){setSuccessModal(true);setTimeout(function(){setSuccessModal(false);},3000);setMessage(msg);};React.useEffect(function(){setLoading(true);getData();},[]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(CommonTable,{loading:loading,Header:HeaderValue,data:filterData,selected:selected,filterOption:filterOption,onchangeOption:function onchangeOption(e,opt){return _onchangeOption(e,opt);},buttonLabel:\"Add Vehicle\",Update:function Update(row){return _Update(row);},onClick:function onClick(res){return addVehicle(res);}}),modalOpen&&/*#__PURE__*/React.createElement(AddVehicleDialog,{closeModal:closeModal,btnLoading:btnLoading,showToast:showToast,fields:row,update:function update(updated,id){return Update_Vehicle(updated,id);},submit:function submit(fields){return _submit(fields);}}),successModal&&/*#__PURE__*/React.createElement(BPNotification,{message:message}));};export default Vehicle;","map":{"version":3,"sources":["/home/selvi/Desktop/My App Pro/vehicle-app/src/views/Vehicle.js"],"names":["React","CommonTable","AddVehicleDialog","Vehicle_Api","BPNotification","requestDataFormat","HeaderValue","Vehicle","props","useState","modalOpen","setmodalOpen","successModal","setSuccessModal","message","setMessage","row","setRow","data","setData","filterOption","setFilterOption","filterData","setFilterData","selected","setSelected","loading","setLoading","btnLoading","setBtnLoading","addVehicle","closeModal","getData","Get_Vehicle","res","code","messsage","Set","map","el","vehicle_cc","submit","fields","Add_Vehicle","showToast","errorHandler","error","Update","Update_Vehicle","id","row1","filter","x","_id","data1","vehicle_name","Object","assign","status","obj","onchangeOption","e","opt","msg","setTimeout","useEffect","updated"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport CommonTable from \"../components/common/CommonTable\";\nimport AddVehicleDialog from \"../components/forms/addVehicle\";\nimport { Vehicle_Api } from \"../api/vehicle_api\";\nimport BPNotification from \"../components/common/BPNotification\";\nimport { requestDataFormat } from \"../components/common/ErrorFormat\";\n\nconst HeaderValue = [\"Vehicle CC\", \"Status\", \"Actions\"];\n\nconst Vehicle = props => {\n  const [modalOpen, setmodalOpen] = React.useState(false);\n  const [successModal, setSuccessModal] = React.useState(false);\n  const [message, setMessage] = React.useState(false);\n  const [row, setRow] = React.useState(false);\n  const [data, setData] = React.useState([]);\n  const [filterOption, setFilterOption] = React.useState([]);\n  const [filterData, setFilterData] = React.useState([]);\n  const [selected, setSelected] = React.useState(\"\");\n  const [loading, setLoading] = React.useState(false);\n  const [btnLoading, setBtnLoading] = React.useState(false);\n\n  const addVehicle = () => {\n    setRow(false);\n    setmodalOpen(!modalOpen);\n  };\n\n  const closeModal = () => {\n    setmodalOpen(!modalOpen);\n  };\n\n  const getData = async () => {\n    const res = await Vehicle_Api.Get_Vehicle();\n    if (res.code === 200) {\n      setData(res.data.messsage);\n      setFilterData(res.data.messsage);\n      setFilterOption([\n        ...new Set(\n          res.data.messsage.map(function(el) {\n            return el.vehicle_cc;\n          })\n        )\n      ]);\n      setLoading(false);\n    } else {\n      setLoading(false);\n      return [];\n    }\n  };\n\n  const submit = async fields => {\n    setBtnLoading(true);\n    const res = await Vehicle_Api.Add_Vehicle(fields);\n    if (res.code === 200) {\n      setmodalOpen(false);\n      setBtnLoading(false);\n      showToast(requestDataFormat.errorHandler(res.data.message));\n      getData();\n    } else {\n      setBtnLoading(false);\n      showToast(requestDataFormat.errorHandler(res.data.error.message));\n    }\n  };\n\n  const Update = row => {\n    setRow(row);\n    setmodalOpen(true);\n  };\n\n  const Update_Vehicle = async (fields, id) => {\n    setBtnLoading(true);\n    const row1 = data.filter(x => x._id === id)[0];\n    let data1 = {};\n    if (row1.vehicle_name !== fields.data.vehicle_name) {\n      data1 = Object.assign(data1, { vehicle_name: fields.data.vehicle_name });\n    }\n    if (row1.vehicle_cc !== fields.data.vehicle_cc) {\n      data1 = Object.assign(data1, { vehicle_cc: fields.data.vehicle_cc });\n    }\n    if (row1.status !== fields.data.status) {\n      data1 = Object.assign(data1, { status: fields.data.status });\n    }\n    const obj = {\n      data: data1\n    };\n    const res = await Vehicle_Api.Update_Vehicle(row1._id, obj);\n    if (res.code === 200) {\n      setmodalOpen(false);\n      showToast(requestDataFormat.errorHandler(res.data.message));\n      setBtnLoading(false);\n      getData();\n    } else {\n      showToast(requestDataFormat.errorHandler(res.data.error.message));\n      setBtnLoading(false);\n    }\n  };\n\n  const onchangeOption = (e, opt) => {\n    if (opt) {\n      setSelected(opt);\n      setFilterData(data.filter(x => x.vehicle_cc === opt));\n    } else {\n      setFilterData(data);\n    }\n  };\n\n  const showToast = msg => {\n    setSuccessModal(true);\n    setTimeout(() => {\n      setSuccessModal(false);\n    }, 3000);\n    setMessage(msg);\n  };\n\n  React.useEffect(() => {\n    setLoading(true);\n    getData();\n  }, []);\n\n  return (\n    <React.Fragment>\n      <CommonTable\n        loading={loading}\n        Header={HeaderValue}\n        data={filterData}\n        selected={selected}\n        filterOption={filterOption}\n        onchangeOption={(e, opt) => onchangeOption(e, opt)}\n        buttonLabel={\"Add Vehicle\"}\n        Update={row => Update(row)}\n        onClick={res => addVehicle(res)}\n      />\n      {modalOpen && (\n        <AddVehicleDialog\n          closeModal={closeModal}\n          btnLoading={btnLoading}\n          showToast={showToast}\n          fields={row}\n          update={(updated, id) => Update_Vehicle(updated, id)}\n          submit={fields => submit(fields)}\n        />\n      )}\n      {successModal && <BPNotification message={message} />}\n    </React.Fragment>\n  );\n};\n\nexport default Vehicle;\n"]},"metadata":{},"sourceType":"module"}