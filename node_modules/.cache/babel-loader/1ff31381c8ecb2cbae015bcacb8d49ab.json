{"ast":null,"code":"import _regeneratorRuntime from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import CommonTable from\"../components/common/CommonTable\";import AddCategoryDialog from\"../components/forms/addCategory\";import{Category_Api}from\"../api/category_api\";import BPNotification from\"../components/common/BPNotification\";import{requestDataFormat}from\"../components/common/ErrorFormat\";var HeaderValue=[\"Category\",\"Status\",\"Actions\"];var Category=function Category(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),modalOpen=_React$useState2[0],setmodalOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),successModal=_React$useState4[0],setSuccessModal=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),message=_React$useState6[0],setMessage=_React$useState6[1];var _React$useState7=React.useState([]),_React$useState8=_slicedToArray(_React$useState7,2),data=_React$useState8[0],setData=_React$useState8[1];var _React$useState9=React.useState(false),_React$useState10=_slicedToArray(_React$useState9,2),row=_React$useState10[0],setRow=_React$useState10[1];var _React$useState11=React.useState([]),_React$useState12=_slicedToArray(_React$useState11,2),filterOption=_React$useState12[0],setFilterOption=_React$useState12[1];var _React$useState13=React.useState([]),_React$useState14=_slicedToArray(_React$useState13,2),filterData=_React$useState14[0],setFilterData=_React$useState14[1];var _React$useState15=React.useState(\"\"),_React$useState16=_slicedToArray(_React$useState15,2),selected=_React$useState16[0],setSelected=_React$useState16[1];var _React$useState17=React.useState(false),_React$useState18=_slicedToArray(_React$useState17,2),loading=_React$useState18[0],setLoading=_React$useState18[1];var _React$useState19=React.useState(false),_React$useState20=_slicedToArray(_React$useState19,2),btnLoading=_React$useState20[0],setBtnLoading=_React$useState20[1];var addCategoty=function addCategoty(){setRow(false);setmodalOpen(!modalOpen);};var closeModal=function closeModal(){setmodalOpen(!modalOpen);};var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Category_Api.Get_Category();case 2:res=_context.sent;if(!(res.code===200)){_context.next=10;break;}setData(res.data.message);setFilterData(res.data.message);setFilterOption(_toConsumableArray(new Set(res.data.message.map(function(el){return el.category_name;}))));setLoading(false);_context.next=12;break;case 10:setLoading(false);return _context.abrupt(\"return\",[]);case 12:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();var _submit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(fields){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setBtnLoading(true);_context2.next=3;return Category_Api.Add_Category(fields);case 3:res=_context2.sent;if(res.code===200){setmodalOpen(false);setBtnLoading(false);showToast(requestDataFormat.errorHandler(res.data.message));getData();}else{showToast(requestDataFormat.errorHandler(res.data.error.message));setBtnLoading(false);}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function submit(_x){return _ref2.apply(this,arguments);};}();var _Update=function Update(row){setRow(row);setmodalOpen(true);};var Update_Category=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(fields,id){var row1,data1,obj,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setBtnLoading(true);row1=data.filter(function(x){return x._id===id;})[0];data1={};if(row1.category_name!==fields.data.category_name){data1=Object.assign(data1,{category_name:fields.data.category_name});}if(row1.status!==fields.data.status){data1=Object.assign(data1,{status:fields.data.status});}obj={data:data1};_context3.next=8;return Category_Api.Update_Category(obj,id);case 8:res=_context3.sent;if(res.code===200){setmodalOpen(false);showToast(requestDataFormat.errorHandler(res.data.message));setBtnLoading(false);getData();}else{showToast(requestDataFormat.errorHandler(res.data.error.message));setBtnLoading(false);}case 10:case\"end\":return _context3.stop();}}},_callee3);}));return function Update_Category(_x2,_x3){return _ref3.apply(this,arguments);};}();var _onchangeOption=function onchangeOption(e,opt){if(opt){setSelected(opt);setFilterData(data.filter(function(x){return x.category_name===opt;}));}else{setFilterData(data);}};var showToast=function showToast(msg){setSuccessModal(true);setTimeout(function(){setSuccessModal(false);},3000);setMessage(msg);};React.useEffect(function(){setLoading(true);getData();},[]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(CommonTable,{loading:loading,Header:HeaderValue,buttonLabel:\"Add Category\",onClick:function onClick(){return addCategoty();},data:filterData,selected:selected,filterOption:filterOption,onchangeOption:function onchangeOption(e,opt){return _onchangeOption(e,opt);},Update:function Update(row){return _Update(row);}}),modalOpen&&/*#__PURE__*/React.createElement(AddCategoryDialog,{closeModal:closeModal,btnLoading:btnLoading,fields:row,showToast:showToast,update:function update(updated,id){return Update_Category(updated,id);},submit:function submit(fields){return _submit(fields);}}),successModal&&/*#__PURE__*/React.createElement(BPNotification,{message:message}));};export default Category;","map":{"version":3,"sources":["/home/selvi/Desktop/My App Pro/vehicle-app/src/views/Category.js"],"names":["React","CommonTable","AddCategoryDialog","Category_Api","BPNotification","requestDataFormat","HeaderValue","Category","useState","modalOpen","setmodalOpen","successModal","setSuccessModal","message","setMessage","data","setData","row","setRow","filterOption","setFilterOption","filterData","setFilterData","selected","setSelected","loading","setLoading","btnLoading","setBtnLoading","addCategoty","closeModal","getData","Get_Category","res","code","Set","map","el","category_name","submit","fields","Add_Category","showToast","errorHandler","error","Update","Update_Category","id","row1","filter","x","_id","data1","Object","assign","status","obj","onchangeOption","e","opt","msg","setTimeout","useEffect","updated"],"mappings":"yoBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,kCAAxB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,iCAA9B,CACA,OAASC,YAAT,KAA6B,qBAA7B,CACA,MAAOC,CAAAA,cAAP,KAA2B,qCAA3B,CACA,OAASC,iBAAT,KAAkC,kCAAlC,CACA,GAAMC,CAAAA,WAAW,CAAG,CAAC,UAAD,CAAa,QAAb,CAAuB,SAAvB,CAApB,CAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,qBACaP,KAAK,CAACQ,QAAN,CAAe,KAAf,CADb,oDACdC,SADc,qBACHC,YADG,0CAEmBV,KAAK,CAACQ,QAAN,CAAe,KAAf,CAFnB,qDAEdG,YAFc,qBAEAC,eAFA,0CAGSZ,KAAK,CAACQ,QAAN,CAAe,KAAf,CAHT,qDAGdK,OAHc,qBAGLC,UAHK,0CAIGd,KAAK,CAACQ,QAAN,CAAe,EAAf,CAJH,qDAIdO,IAJc,qBAIRC,OAJQ,0CAKChB,KAAK,CAACQ,QAAN,CAAe,KAAf,CALD,sDAKdS,GALc,sBAKTC,MALS,4CAMmBlB,KAAK,CAACQ,QAAN,CAAe,EAAf,CANnB,uDAMdW,YANc,sBAMAC,eANA,4CAOepB,KAAK,CAACQ,QAAN,CAAe,EAAf,CAPf,uDAOda,UAPc,sBAOFC,aAPE,4CAQWtB,KAAK,CAACQ,QAAN,CAAe,EAAf,CARX,uDAQde,QARc,sBAQJC,WARI,4CASSxB,KAAK,CAACQ,QAAN,CAAe,KAAf,CATT,uDASdiB,OATc,sBASLC,UATK,4CAUe1B,KAAK,CAACQ,QAAN,CAAe,KAAf,CAVf,uDAUdmB,UAVc,sBAUFC,aAVE,sBAYrB,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxBX,MAAM,CAAC,KAAD,CAAN,CACAR,YAAY,CAAC,CAACD,SAAF,CAAZ,CACD,CAHD,CAKA,GAAMqB,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvBpB,YAAY,CAAC,CAACD,SAAF,CAAZ,CACD,CAFD,CAIA,GAAMsB,CAAAA,OAAO,0FAAG,iKACI5B,CAAAA,YAAY,CAAC6B,YAAb,EADJ,QACRC,GADQ,oBAEVA,GAAG,CAACC,IAAJ,GAAa,GAFH,2BAGZlB,OAAO,CAACiB,GAAG,CAAClB,IAAJ,CAASF,OAAV,CAAP,CACAS,aAAa,CAACW,GAAG,CAAClB,IAAJ,CAASF,OAAV,CAAb,CACAO,eAAe,oBACV,GAAIe,CAAAA,GAAJ,CACDF,GAAG,CAAClB,IAAJ,CAASF,OAAT,CAAiBuB,GAAjB,CAAqB,SAASC,EAAT,CAAa,CAChC,MAAOA,CAAAA,EAAE,CAACC,aAAV,CACD,CAFD,CADC,CADU,EAAf,CAOAZ,UAAU,CAAC,KAAD,CAAV,CAZY,+BAcZA,UAAU,CAAC,KAAD,CAAV,CAdY,gCAeL,EAfK,yDAAH,kBAAPK,CAAAA,OAAO,0CAAb,CAmBA,GAAMQ,CAAAA,OAAM,2FAAG,kBAAMC,MAAN,8HACbZ,aAAa,CAAC,IAAD,CAAb,CADa,uBAEKzB,CAAAA,YAAY,CAACsC,YAAb,CAA0BD,MAA1B,CAFL,QAEPP,GAFO,gBAGb,GAAIA,GAAG,CAACC,IAAJ,GAAa,GAAjB,CAAsB,CACpBxB,YAAY,CAAC,KAAD,CAAZ,CACAkB,aAAa,CAAC,KAAD,CAAb,CACAc,SAAS,CAACrC,iBAAiB,CAACsC,YAAlB,CAA+BV,GAAG,CAAClB,IAAJ,CAASF,OAAxC,CAAD,CAAT,CACAkB,OAAO,GACR,CALD,IAKO,CACLW,SAAS,CAACrC,iBAAiB,CAACsC,YAAlB,CAA+BV,GAAG,CAAClB,IAAJ,CAAS6B,KAAT,CAAe/B,OAA9C,CAAD,CAAT,CACAe,aAAa,CAAC,KAAD,CAAb,CACD,CAXY,wDAAH,kBAANW,CAAAA,MAAM,6CAAZ,CAcA,GAAMM,CAAAA,OAAM,CAAG,QAATA,CAAAA,MAAS,CAAA5B,GAAG,CAAI,CACpBC,MAAM,CAACD,GAAD,CAAN,CACAP,YAAY,CAAC,IAAD,CAAZ,CACD,CAHD,CAKA,GAAMoC,CAAAA,eAAe,2FAAG,kBAAON,MAAP,CAAeO,EAAf,6IACtBnB,aAAa,CAAC,IAAD,CAAb,CACMoB,IAFgB,CAETjC,IAAI,CAACkC,MAAL,CAAY,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,GAAF,GAAUJ,EAAd,EAAb,EAA+B,CAA/B,CAFS,CAGlBK,KAHkB,CAGV,EAHU,CAItB,GAAIJ,IAAI,CAACV,aAAL,GAAuBE,MAAM,CAACzB,IAAP,CAAYuB,aAAvC,CAAsD,CACpDc,KAAK,CAAGC,MAAM,CAACC,MAAP,CAAcF,KAAd,CAAqB,CAC3Bd,aAAa,CAAEE,MAAM,CAACzB,IAAP,CAAYuB,aADA,CAArB,CAAR,CAGD,CACD,GAAIU,IAAI,CAACO,MAAL,GAAgBf,MAAM,CAACzB,IAAP,CAAYwC,MAAhC,CAAwC,CACtCH,KAAK,CAAGC,MAAM,CAACC,MAAP,CAAcF,KAAd,CAAqB,CAAEG,MAAM,CAAEf,MAAM,CAACzB,IAAP,CAAYwC,MAAtB,CAArB,CAAR,CACD,CACKC,GAZgB,CAYV,CACVzC,IAAI,CAAEqC,KADI,CAZU,wBAeJjD,CAAAA,YAAY,CAAC2C,eAAb,CAA6BU,GAA7B,CAAkCT,EAAlC,CAfI,QAehBd,GAfgB,gBAgBtB,GAAIA,GAAG,CAACC,IAAJ,GAAa,GAAjB,CAAsB,CACpBxB,YAAY,CAAC,KAAD,CAAZ,CACAgC,SAAS,CAACrC,iBAAiB,CAACsC,YAAlB,CAA+BV,GAAG,CAAClB,IAAJ,CAASF,OAAxC,CAAD,CAAT,CACAe,aAAa,CAAC,KAAD,CAAb,CACAG,OAAO,GACR,CALD,IAKO,CACLW,SAAS,CAACrC,iBAAiB,CAACsC,YAAlB,CAA+BV,GAAG,CAAClB,IAAJ,CAAS6B,KAAT,CAAe/B,OAA9C,CAAD,CAAT,CACAe,aAAa,CAAC,KAAD,CAAb,CACD,CAxBqB,yDAAH,kBAAfkB,CAAAA,eAAe,kDAArB,CA2BA,GAAMW,CAAAA,eAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,CAAD,CAAIC,GAAJ,CAAY,CACjC,GAAIA,GAAJ,CAAS,CACPnC,WAAW,CAACmC,GAAD,CAAX,CACArC,aAAa,CAACP,IAAI,CAACkC,MAAL,CAAY,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACZ,aAAF,GAAoBqB,GAAxB,EAAb,CAAD,CAAb,CACD,CAHD,IAGO,CACLrC,aAAa,CAACP,IAAD,CAAb,CACD,CACF,CAPD,CASA,GAAM2B,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAAAkB,GAAG,CAAI,CACvBhD,eAAe,CAAC,IAAD,CAAf,CACAiD,UAAU,CAAC,UAAM,CACfjD,eAAe,CAAC,KAAD,CAAf,CACD,CAFS,CAEP,IAFO,CAAV,CAGAE,UAAU,CAAC8C,GAAD,CAAV,CACD,CAND,CAQA5D,KAAK,CAAC8D,SAAN,CAAgB,UAAM,CACpBpC,UAAU,CAAC,IAAD,CAAV,CACAK,OAAO,GACR,CAHD,CAGG,EAHH,EAKA,mBACE,oBAAC,KAAD,CAAO,QAAP,mBACE,oBAAC,WAAD,EACE,OAAO,CAAEN,OADX,CAEE,MAAM,CAAEnB,WAFV,CAGE,WAAW,CAAE,cAHf,CAIE,OAAO,CAAE,yBAAMuB,CAAAA,WAAW,EAAjB,EAJX,CAKE,IAAI,CAAER,UALR,CAME,QAAQ,CAAEE,QANZ,CAOE,YAAY,CAAEJ,YAPhB,CAQE,cAAc,CAAE,wBAACuC,CAAD,CAAIC,GAAJ,QAAYF,CAAAA,eAAc,CAACC,CAAD,CAAIC,GAAJ,CAA1B,EARlB,CASE,MAAM,CAAE,gBAAA1C,GAAG,QAAI4B,CAAAA,OAAM,CAAC5B,GAAD,CAAV,EATb,EADF,CAYGR,SAAS,eACR,oBAAC,iBAAD,EACE,UAAU,CAAEqB,UADd,CAEE,UAAU,CAAEH,UAFd,CAGE,MAAM,CAAEV,GAHV,CAIE,SAAS,CAAEyB,SAJb,CAKE,MAAM,CAAE,gBAACqB,OAAD,CAAUhB,EAAV,QAAiBD,CAAAA,eAAe,CAACiB,OAAD,CAAUhB,EAAV,CAAhC,EALV,CAME,MAAM,CAAE,gBAAAP,MAAM,QAAID,CAAAA,OAAM,CAACC,MAAD,CAAV,EANhB,EAbJ,CAsBG7B,YAAY,eAAI,oBAAC,cAAD,EAAgB,OAAO,CAAEE,OAAzB,EAtBnB,CADF,CA0BD,CAtID,CAwIA,cAAeN,CAAAA,QAAf","sourcesContent":["import React from \"react\";\nimport CommonTable from \"../components/common/CommonTable\";\nimport AddCategoryDialog from \"../components/forms/addCategory\";\nimport { Category_Api } from \"../api/category_api\";\nimport BPNotification from \"../components/common/BPNotification\";\nimport { requestDataFormat } from \"../components/common/ErrorFormat\";\nconst HeaderValue = [\"Category\", \"Status\", \"Actions\"];\n\nconst Category = () => {\n  const [modalOpen, setmodalOpen] = React.useState(false);\n  const [successModal, setSuccessModal] = React.useState(false);\n  const [message, setMessage] = React.useState(false);\n  const [data, setData] = React.useState([]);\n  const [row, setRow] = React.useState(false);\n  const [filterOption, setFilterOption] = React.useState([]);\n  const [filterData, setFilterData] = React.useState([]);\n  const [selected, setSelected] = React.useState(\"\");\n  const [loading, setLoading] = React.useState(false);\n  const [btnLoading, setBtnLoading] = React.useState(false);\n\n  const addCategoty = () => {\n    setRow(false);\n    setmodalOpen(!modalOpen);\n  };\n\n  const closeModal = () => {\n    setmodalOpen(!modalOpen);\n  };\n\n  const getData = async () => {\n    const res = await Category_Api.Get_Category();\n    if (res.code === 200) {\n      setData(res.data.message);\n      setFilterData(res.data.message);\n      setFilterOption([\n        ...new Set(\n          res.data.message.map(function(el) {\n            return el.category_name;\n          })\n        )\n      ]);\n      setLoading(false);\n    } else {\n      setLoading(false);\n      return [];\n    }\n  };\n\n  const submit = async fields => {\n    setBtnLoading(true);\n    const res = await Category_Api.Add_Category(fields);\n    if (res.code === 200) {\n      setmodalOpen(false);\n      setBtnLoading(false);\n      showToast(requestDataFormat.errorHandler(res.data.message));\n      getData();\n    } else {\n      showToast(requestDataFormat.errorHandler(res.data.error.message));\n      setBtnLoading(false);\n    }\n  };\n\n  const Update = row => {\n    setRow(row);\n    setmodalOpen(true);\n  };\n\n  const Update_Category = async (fields, id) => {\n    setBtnLoading(true);\n    const row1 = data.filter(x => x._id === id)[0];\n    let data1 = {};\n    if (row1.category_name !== fields.data.category_name) {\n      data1 = Object.assign(data1, {\n        category_name: fields.data.category_name\n      });\n    }\n    if (row1.status !== fields.data.status) {\n      data1 = Object.assign(data1, { status: fields.data.status });\n    }\n    const obj = {\n      data: data1\n    };\n    const res = await Category_Api.Update_Category(obj, id);\n    if (res.code === 200) {\n      setmodalOpen(false);\n      showToast(requestDataFormat.errorHandler(res.data.message));\n      setBtnLoading(false);\n      getData();\n    } else {\n      showToast(requestDataFormat.errorHandler(res.data.error.message));\n      setBtnLoading(false);\n    }\n  };\n\n  const onchangeOption = (e, opt) => {\n    if (opt) {\n      setSelected(opt);\n      setFilterData(data.filter(x => x.category_name === opt));\n    } else {\n      setFilterData(data);\n    }\n  };\n\n  const showToast = msg => {\n    setSuccessModal(true);\n    setTimeout(() => {\n      setSuccessModal(false);\n    }, 3000);\n    setMessage(msg);\n  };\n\n  React.useEffect(() => {\n    setLoading(true);\n    getData();\n  }, []);\n\n  return (\n    <React.Fragment>\n      <CommonTable\n        loading={loading}\n        Header={HeaderValue}\n        buttonLabel={\"Add Category\"}\n        onClick={() => addCategoty()}\n        data={filterData}\n        selected={selected}\n        filterOption={filterOption}\n        onchangeOption={(e, opt) => onchangeOption(e, opt)}\n        Update={row => Update(row)}\n      />\n      {modalOpen && (\n        <AddCategoryDialog\n          closeModal={closeModal}\n          btnLoading={btnLoading}\n          fields={row}\n          showToast={showToast}\n          update={(updated, id) => Update_Category(updated, id)}\n          submit={fields => submit(fields)}\n        />\n      )}\n      {successModal && <BPNotification message={message} />}\n    </React.Fragment>\n  );\n};\n\nexport default Category;\n"]},"metadata":{},"sourceType":"module"}