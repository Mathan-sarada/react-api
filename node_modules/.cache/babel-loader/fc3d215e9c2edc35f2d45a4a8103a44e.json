{"ast":null,"code":"import _regeneratorRuntime from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/selvi/Desktop/My App Pro/vehicle-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import CommonTable from\"../components/common/CommonTable\";import AddLocationDialog from\"../components/forms/addLocation\";import{Location_Api}from\"../api/location_api\";import BPNotification from\"../components/common/BPNotification\";import{requestDataFormat}from\"../components/common/ErrorFormat\";var HeaderValue=[\"Location\",\"Status\",\"Action\"];var Location=function Location(props){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),modalOpen=_React$useState2[0],setmodalOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),successModal=_React$useState4[0],setSuccessModal=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),message=_React$useState6[0],setMessage=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),row=_React$useState8[0],setRow=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),data=_React$useState10[0],setData=_React$useState10[1];var _React$useState11=React.useState([]),_React$useState12=_slicedToArray(_React$useState11,2),filterOption=_React$useState12[0],setFilterOption=_React$useState12[1];var _React$useState13=React.useState([]),_React$useState14=_slicedToArray(_React$useState13,2),filterData=_React$useState14[0],setFilterData=_React$useState14[1];var _React$useState15=React.useState(\"\"),_React$useState16=_slicedToArray(_React$useState15,2),selected=_React$useState16[0],setSelected=_React$useState16[1];var _React$useState17=React.useState(false),_React$useState18=_slicedToArray(_React$useState17,2),loading=_React$useState18[0],setLoading=_React$useState18[1];var _React$useState19=React.useState(false),_React$useState20=_slicedToArray(_React$useState19,2),btnLoading=_React$useState20[0],setBtnLoading=_React$useState20[1];var addLocation=function addLocation(){setRow(false);setmodalOpen(!modalOpen);};var closeModal=function closeModal(){setmodalOpen(!modalOpen);};var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Location_Api.Get_Location();case 2:res=_context.sent;if(!(res.code===200)){_context.next=10;break;}setData(res.data.message);setFilterData(res.data.message);setFilterOption(_toConsumableArray(new Set(res.data.message.map(function(el){return el.location;}))));setLoading(false);_context.next=12;break;case 10:setLoading(false);return _context.abrupt(\"return\",[]);case 12:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();var _submit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(fields){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setBtnLoading(true);_context2.next=3;return Location_Api.Add_Location(fields);case 3:res=_context2.sent;if(res.code===200){setmodalOpen(false);setBtnLoading(false);showToast(requestDataFormat.errorHandler(res.data.message));getData();}else{setBtnLoading(false);showToast(res.data.error.message);}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function submit(_x){return _ref2.apply(this,arguments);};}();var _Update=function Update(row){setRow(row);setmodalOpen(true);};var Update_Location=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(fields,id){var row1,data1,obj,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setBtnLoading(true);row1=data.filter(function(x){return x._id===id;})[0];data1={};if(row1.location!==fields.data.location){data1=Object.assign(data1,{location:fields.data.location});}if(row1.status!==fields.data.status){data1=Object.assign(data1,{status:fields.data.status});}obj={data:data1};if(!(Object.keys(obj).length!==0)){_context3.next=11;break;}_context3.next=9;return Location_Api.Update_Location(obj,row1._id);case 9:res=_context3.sent;if(res.code===200){setmodalOpen(false);setBtnLoading(false);showToast(requestDataFormat.errorHandler(res.data.message));getData();}else{showToast(requestDataFormat.errorHandler(res.data.error.message));setBtnLoading(false);}case 11:case\"end\":return _context3.stop();}}},_callee3);}));return function Update_Location(_x2,_x3){return _ref3.apply(this,arguments);};}();var _onchangeOption=function onchangeOption(e,opt){if(opt){setSelected(opt);setFilterData(data.filter(function(x){return x.location===opt;}));}else{setFilterData(data);}};var showToast=function showToast(msg){setSuccessModal(true);setTimeout(function(){setSuccessModal(false);},3000);setMessage(msg);};React.useEffect(function(){setLoading(true);getData();},[]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(CommonTable,{loading:loading,Header:HeaderValue,data:filterData,selected:selected,filterOption:filterOption,onchangeOption:function onchangeOption(e,opt){return _onchangeOption(e,opt);},buttonLabel:\"Add Location\",Update:function Update(row){return _Update(row);},onClick:function onClick(res){return addLocation(res);}}),modalOpen&&/*#__PURE__*/React.createElement(AddLocationDialog,{closeModal:closeModal,fields:row,showToast:showToast,btnLoading:btnLoading,update:function update(updated,id){return Update_Location(updated,id);},submit:function submit(fields){return _submit(fields);}}),successModal&&/*#__PURE__*/React.createElement(BPNotification,{message:message}));};export default Location;","map":{"version":3,"sources":["/home/selvi/Desktop/My App Pro/vehicle-app/src/views/Location.js"],"names":["React","CommonTable","AddLocationDialog","Location_Api","BPNotification","requestDataFormat","HeaderValue","Location","props","useState","modalOpen","setmodalOpen","successModal","setSuccessModal","message","setMessage","row","setRow","data","setData","filterOption","setFilterOption","filterData","setFilterData","selected","setSelected","loading","setLoading","btnLoading","setBtnLoading","addLocation","closeModal","getData","Get_Location","res","code","Set","map","el","location","submit","fields","Add_Location","showToast","errorHandler","error","Update","Update_Location","id","row1","filter","x","_id","data1","Object","assign","status","obj","keys","length","onchangeOption","e","opt","msg","setTimeout","useEffect","updated"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport CommonTable from \"../components/common/CommonTable\";\nimport AddLocationDialog from \"../components/forms/addLocation\";\nimport { Location_Api } from \"../api/location_api\";\nimport BPNotification from \"../components/common/BPNotification\";\nimport { requestDataFormat } from \"../components/common/ErrorFormat\";\n\nconst HeaderValue = [\"Location\", \"Status\", \"Action\"];\n\nconst Location = props => {\n  const [modalOpen, setmodalOpen] = React.useState(false);\n  const [successModal, setSuccessModal] = React.useState(false);\n  const [message, setMessage] = React.useState(false);\n  const [row, setRow] = React.useState(false);\n  const [data, setData] = React.useState([]);\n  const [filterOption, setFilterOption] = React.useState([]);\n  const [filterData, setFilterData] = React.useState([]);\n  const [selected, setSelected] = React.useState(\"\");\n  const [loading, setLoading] = React.useState(false);\n  const [btnLoading, setBtnLoading] = React.useState(false);\n\n  const addLocation = () => {\n    setRow(false);\n    setmodalOpen(!modalOpen);\n  };\n\n  const closeModal = () => {\n    setmodalOpen(!modalOpen);\n  };\n\n  const getData = async () => {\n    const res = await Location_Api.Get_Location();\n    if (res.code === 200) {\n      setData(res.data.message);\n      setFilterData(res.data.message);\n      setFilterOption([\n        ...new Set(\n          res.data.message.map(function(el) {\n            return el.location;\n          })\n        )\n      ]);\n      setLoading(false);\n    } else {\n      setLoading(false);\n      return [];\n    }\n  };\n\n  const submit = async fields => {\n    setBtnLoading(true);\n    const res = await Location_Api.Add_Location(fields);\n    if (res.code === 200) {\n      setmodalOpen(false);\n      setBtnLoading(false);\n      showToast(requestDataFormat.errorHandler(res.data.message));\n      getData();\n    } else {\n      setBtnLoading(false);\n      showToast(res.data.error.message);\n    }\n  };\n\n  const Update = row => {\n    setRow(row);\n    setmodalOpen(true);\n  };\n\n  const Update_Location = async (fields, id) => {\n    setBtnLoading(true);\n    const row1 = data.filter(x => x._id === id)[0];\n    let data1 = {};\n    if (row1.location !== fields.data.location) {\n      data1 = Object.assign(data1, { location: fields.data.location });\n    }\n    if (row1.status !== fields.data.status) {\n      data1 = Object.assign(data1, { status: fields.data.status });\n    }\n    const obj = {\n      data: data1\n    };\n    if (Object.keys(obj).length !== 0) {\n      const res = await Location_Api.Update_Location(obj, row1._id);\n      if (res.code === 200) {\n        setmodalOpen(false);\n        setBtnLoading(false);\n        showToast(requestDataFormat.errorHandler(res.data.message));\n        getData();\n      } else {\n        showToast(requestDataFormat.errorHandler(res.data.error.message));\n        setBtnLoading(false);\n      }\n    }\n  };\n\n  const onchangeOption = (e, opt) => {\n    if (opt) {\n      setSelected(opt);\n      setFilterData(data.filter(x => x.location === opt));\n    } else {\n      setFilterData(data);\n    }\n  };\n\n  const showToast = msg => {\n    setSuccessModal(true);\n    setTimeout(() => {\n      setSuccessModal(false);\n    }, 3000);\n    setMessage(msg);\n  };\n\n  React.useEffect(() => {\n    setLoading(true);\n    getData();\n  }, []);\n\n  return (\n    <React.Fragment>\n      <CommonTable\n        loading={loading}\n        Header={HeaderValue}\n        data={filterData}\n        selected={selected}\n        filterOption={filterOption}\n        onchangeOption={(e, opt) => onchangeOption(e, opt)}\n        buttonLabel={\"Add Location\"}\n        Update={row => Update(row)}\n        onClick={res => addLocation(res)}\n      />\n      {modalOpen && (\n        <AddLocationDialog\n          closeModal={closeModal}\n          fields={row}\n          showToast={showToast}\n          btnLoading={btnLoading}\n          update={(updated, id) => Update_Location(updated, id)}\n          submit={fields => submit(fields)}\n        />\n      )}\n      {successModal && <BPNotification message={message} />}\n    </React.Fragment>\n  );\n};\n\nexport default Location;\n"]},"metadata":{},"sourceType":"module"}